<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.excerpt | strip_html | default: site.description }}">
  <link rel="icon" href="/assets/img/logo.svg" type="image/svg+xml">
  <link rel="stylesheet" href="/assets/css/style.css" />
  <meta name="color-scheme" content="light dark">
</head>
<body>
  {% include header.html %}
  <main class="container">
    {% include breadcrumbs.html %}
    {{ content }}
  </main>
  {% include footer.html %}
  <script>
  (function(){
    const storageKey = 'govbook-theme';
    const root = document.documentElement;
    const btn  = document.getElementById('theme-toggle');
    const icon = btn.querySelector('.theme-icon');
    const label = btn.querySelector('.theme-label');
  
    function applyTheme(theme) {
      root.classList.remove('light','dark');
      if (theme === 'light') root.classList.add('light');
      if (theme === 'dark')  root.classList.add('dark');
  
      // Update ARIA + UI labels/icons
      if (theme === 'light') {
        btn.setAttribute('aria-pressed', 'true');
        icon.textContent = 'â˜€ï¸';
        label.textContent = 'Light';
      } else if (theme === 'dark') {
        btn.setAttribute('aria-pressed', 'true');
        icon.textContent = 'ðŸŒ™';
        label.textContent = 'Dark';
      } else {
        btn.setAttribute('aria-pressed', 'false');
        icon.textContent = 'ðŸ–¥';
        label.textContent = 'System';
      }
    }
  
    // Load persisted theme
    const remembered = localStorage.getItem(storageKey);
    applyTheme(remembered);
  
    btn.addEventListener('click', () => {
      const current = localStorage.getItem(storageKey);
      const next = current === 'dark' ? 'light'
                 : current === 'light' ? null
                 : 'dark';
      if (next) localStorage.setItem(storageKey, next);
      else localStorage.removeItem(storageKey);
      applyTheme(next);
    });
  })();
  </script>
</body>
</html>
